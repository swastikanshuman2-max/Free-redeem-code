<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tic Tac Toe 4x4 Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    .cell {
      transition: background-color 0.3s ease;
    }
    .cell:hover {
      background-color: #e0f2fe;
      cursor: pointer;
    }
    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      overflow: visible;
      z-index: 50;
    }
    .firecracker {
      position: absolute;
      width: 20px;
      height: 20px;
      background: radial-gradient(circle at center, #f59e0b, #b45309);
      border-radius: 50%;
      filter: drop-shadow(0 0 3px #fbbf24);
      animation: explode 1s ease forwards;
    }
    @keyframes explode {
      0% {
        opacity: 1;
        transform: translate(0, 0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translate(var(--x), var(--y)) scale(0.3);
      }
    }
  </style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-1030634697978408" crossorigin="anonymous"></script>
<!-- Homepage Leaderboard -->
<ins class="adsbygoogle"
style="display:inline-block;width:728px;height:90px"
data-ad-client="ca-app-pub-1030634697978408"
data-ad-slot="4314846925"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  
</head>
<body class="bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 min-h-screen flex flex-col items-center justify-center p-4">
  <h1 class="text-5xl font-extrabold text-white mb-8 drop-shadow-lg select-none">Tic Tac Toe 4x4</h1>

  <div
    id="game"
    class="bg-white rounded-3xl shadow-2xl p-6 w-full max-w-lg flex flex-col items-center"
  >
    <div
      id="board"
      class="grid grid-cols-4 grid-rows-4 gap-4 w-full max-w-lg"
      aria-label="Tic Tac Toe Board"
      role="grid"
    >
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 1"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 2"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 3"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 4"
        role="gridcell"
      ></button>

      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 5"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 6"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 7"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 8"
        role="gridcell"
      ></button>

      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 9"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 10"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 11"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 12"
        role="gridcell"
      ></button>

      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 13"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 14"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 15"
        role="gridcell"
      ></button>
      <button
        class="cell bg-indigo-50 rounded-xl aspect-square flex items-center justify-center text-5xl font-bold text-indigo-700 select-none"
        data-cell
        aria-label="Cell 16"
        role="gridcell"
      ></button>
    </div>

    <div
      id="status"
      class="mt-6 text-xl font-semibold text-indigo-700 min-h-[2rem] select-none"
      aria-live="polite"
    >
      Player X's turn
    </div>

    <button
      id="resetBtn"
      class="mt-8 bg-indigo-700 hover:bg-indigo-800 text-white font-semibold py-3 px-8 rounded-full shadow-lg transition-colors duration-300 focus:outline-none focus:ring-4 focus:ring-indigo-400"
      aria-label="Reset Game"
    >
      Reset Game
    </button>
  </div>

  <div id="celebration" class="celebration pointer-events-none"></div>

  <script>
    (() => {
      const X = "X";
      const O = "O";
      let currentPlayer = X;
      let board = Array(16).fill(null);
      let gameActive = true;
      let celebrationInterval = null;

      // Winning combinations for 4x4 Tic Tac Toe (4 in a row)
      // Horizontal lines
      const winningCombinations = [];
      for (let row = 0; row < 4; row++) {
        winningCombinations.push([row * 4, row * 4 + 1, row * 4 + 2, row * 4 + 3]);
      }
      // Vertical lines
      for (let col = 0; col < 4; col++) {
        winningCombinations.push([col, col + 4, col + 8, col + 12]);
      }
      // Diagonal top-left to bottom-right
      winningCombinations.push([0, 5, 10, 15]);
      // Diagonal top-right to bottom-left
      winningCombinations.push([3, 6, 9, 12]);

      const cells = document.querySelectorAll("[data-cell]");
      const status = document.getElementById("status");
      const resetBtn = document.getElementById("resetBtn");
      const celebrationContainer = document.getElementById("celebration");

      function checkWin(player) {
        return winningCombinations.some((combination) =>
          combination.every((index) => board[index] === player)
        );
      }

      function checkDraw() {
        return board.every((cell) => cell !== null);
      }

      function updateStatus(message) {
        status.textContent = message;
      }

      function placeMark(cell, index) {
        board[index] = currentPlayer;
        cell.textContent = currentPlayer;
        cell.classList.add(currentPlayer === X ? "text-indigo-700" : "text-pink-600");
      }

      function switchPlayer() {
        currentPlayer = currentPlayer === X ? O : X;
      }

      function celebrate() {
        if (celebrationInterval) return;

        function createFirecracker() {
          const firecracker = document.createElement("div");
          firecracker.classList.add("firecracker");
          const size = Math.random() * 15 + 10;
          firecracker.style.width = `${size}px`;
          firecracker.style.height = `${size}px`;
          firecracker.style.background = `radial-gradient(circle at center, hsl(${Math.random() * 360}, 100%, 60%), hsl(${Math.random() * 360}, 100%, 40%))`;
          firecracker.style.filter = `drop-shadow(0 0 5px hsl(${Math.random() * 360}, 100%, 70%))`;
          firecracker.style.left = `${Math.random() * 100}vw`;
          firecracker.style.top = `${Math.random() * 100}vh`;
          firecracker.style.setProperty("--x", `${(Math.random() - 0.5) * 200}px`);
          firecracker.style.setProperty("--y", `${(Math.random() - 1) * 200}px`);
          celebrationContainer.appendChild(firecracker);

          setTimeout(() => {
            firecracker.remove();
          }, 1000);
        }

        celebrationInterval = setInterval(() => {
          for (let i = 0; i < 5; i++) {
            createFirecracker();
          }
        }, 200);
      }

      function stopCelebration() {
        clearInterval(celebrationInterval);
        celebrationInterval = null;
        celebrationContainer.innerHTML = "";
      }

      function handleClick(e) {
        if (!gameActive) return;
        const cell = e.target;
        const index = Array.from(cells).indexOf(cell);
        if (board[index] !== null) return;

        placeMark(cell, index);

        if (checkWin(currentPlayer)) {
          updateStatus(`Player ${currentPlayer} wins! ðŸŽ‰`);
          gameActive = false;
          celebrate();
          return;
        }

        if (checkDraw()) {
          updateStatus("It's a draw!");
          gameActive = false;
          return;
        }

        switchPlayer();
        updateStatus(`Player ${currentPlayer}'s turn`);
      }

      function resetGame() {
        board = Array(16).fill(null);
        gameActive = true;
        currentPlayer = X;
        cells.forEach((cell) => {
          cell.textContent = "";
          cell.classList.remove("text-indigo-700", "text-pink-600");
        });
        updateStatus(`Player ${currentPlayer}'s turn`);
        stopCelebration();
      }

      cells.forEach((cell) => cell.addEventListener("click", handleClick));
      resetBtn.addEventListener("click", resetGame);
    })();
  </script>
</body>
</html>
